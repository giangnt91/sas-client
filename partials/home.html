<div class="main-panel">
    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="card">
                    <div class="card-body">
                        <div class="material-datatables">

                            <div class="row bottom-10">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-lg-8">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="input-group add">
                                                        <label for="hregday">Từ Ngày</label>
                                                        <input type="text" class="form-control" id="hregday">
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="input-group add">
                                                        <label for="hregday">Đến Ngày</label>
                                                        <input type="text" class="form-control" id="hregday2">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="input-group add">
                                                        <label for="coso">Cơ sở</label>
                                                        <select class="form-control" ng-model="HCenter" ng-options="option.Name for option in Center">
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="input-group add">
                                                        <label for="HStatus">Trạng thái</label>
                                                        <select class="form-control" ng-model="HStatus" ng-options="option.name for option in Status2">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
											<div class="row">
									
                                                <div class="col-lg-12">
                                                   <div class="input-group add">
														<!-- <div class="input-group-prepend add"> -->
															<label for="musername">Số Điện Thoại</label>
														<!-- </div> -->
														<input type="number" class="form-control" placeholder="0123456789" ng-model="crmphone">
												   </div>
                                                </div>
										
											</div>
											
												<div class="collapse" id="collapseExample">
													<div class="card card-body" style="margin-top: -15px;">
														<div class="row">
															<div class="col-lg-4">
															   <div class="input-group add">
																	<label for="musername">Tên</label>
																	<input id="proname" type="text" class="form-control" placeholder="2ichi" ng-model="proName">
															   </div>
															</div>
															<div class="col-lg-4">
															   <div class="input-group add">
																	<label for="musername">Địa chỉ</label>
																	<select class="form-control" ng-model="proAddress" ng-options="option.name for option in Address">
																	</select>
															   </div>
															</div>
															<div class="col-lg-4">
															   <div class="input-group add">
																	<label for="musername">Cơ sở</label>
																	<select class="form-control" ng-model="proCenter" ng-options="option.Name for option in Center">
																	</select>
															   </div>
															</div>
															<div class="col-lg-6">
															   <div class="input-group add">
																	<label for="musername">Nhân viên</label>
																	<select class="form-control" ng-model="proSale"
																		ng-options="option.name for option in Users">
																	</select>
															   </div>
															</div>
															 <div class="col-lg-6">
																<div class="input-group add">
																	<a href="" class="btn btn-primary btn-block" ng-click="proSearch()">
																		<i class="material-icons">search</i> Tìm Kiếm
																	</a>
																</div>
															</div>
														</div>
													</div>
												</div>
												
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="row">
                                                <div class="col-lg-11">
                                                    <a href="#" class="btn sas-bk btn-block" style="margin-left: 20px"
                                                        ng-click="Searchwith()">
                                                        <i class="material-icons">search</i> Tìm Kiếm
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="row top-10">
                                                <div class="col-lg-11">
                                                    <a href="#" class="btn btn-default btn-block" style="margin-left: 20px"
                                                        ng-click="Clear()">
                                                        <i class="material-icons">clear_all</i> Clear
                                                    </a>
                                                </div>
                                            </div>
											
											<div class="row top-10">
												
														<div class="col-lg-11">
															<a href="#" class="btn btn-warning btn-block" style="margin-left: 20px"
																ng-click="fillallCrm()">
																<i class="material-icons">location_searching</i> Tìm Trên Toàn Hệ Thống
															</a>
															</div>
												
											</div>
											
											<div class="row top-10">
												<div class="col-lg-11">
													<a href="" data-toggle="collapse" data-target="#collapseExample" class="btn btn-info btn-block" style="margin-left: 20px">
														<i class="material-icons">zoom_in</i> Tìm Kiếm Nâng Cao
													</a>
												</div>
											</div>

                                        </div>
                                    </div>
                                </div>
                            </div>
							
							<table datatable dt-options="newdtOptions" dt-columns="dtColumns" dt-instance="dtInstance" class="table table-striped cell-border table-hover"></table>
	
                            <!-- <table datatable="ng" dt-options="newdtOptions" cellpadding="0" -->
                                <!-- class="table table-striped cell-border table-hover"> -->
                                <!-- <thead> -->
                                    <!-- <tr> -->
                                        <!-- <th>STT</th> -->
                                        <!-- <th>Time</th> -->
                                        <!-- <th>ID</th> -->
                                        <!-- <th>Họ</th> -->
										<!-- <th>Tên</th> -->
                                        <!-- <th>Giới tính</th> -->
                                        <!-- <th>Số điện thoại</th> -->
                                        <!-- <th>Địa chỉ</th> -->
                                        <!-- <th>Trạng thái</th> -->
                                        <!-- <th>Nhân viên</th> -->
                                    <!-- </tr> -->
                                <!-- </thead> -->
                                <!-- <tbody> -->
                                    <!-- <tr ng-repeat="content in list_student" style="cursor:pointer" ng-click="detail(content._id); checkDuplicator(content, 1)"> -->
                                        <!-- <td class="text-center">{{$index +1}}</td> -->
                                        <!-- <td>{{content.Regday +' '+ content.Regtime}}</td> -->
                                        <!-- <td>{{content._id}}</td> -->
                                        <!-- <td>{{content.Fistname}}</td> -->
										<!-- <td>{{content.Lastname}}</td> -->
                                        <!-- <td>{{content.Sex[0].name}}</td> -->
                                        <!-- <td>{{content.Phone}}</td> -->
                                        <!-- <td>{{content.Address[0].name}}</td> -->
                                        <!-- <td>{{content.Status_student[0].name}}</td> -->
                                        <!-- <td class="text-center"> -->
                                            <!-- <a href="" class="btn cbtn cbtn-left sas-bk btn-sm" data-tooltip="{{content.Manager[0].name}}">{{content.Manager[0].id}}</a> -->
                                        <!-- </td> -->
                                    <!-- </tr> -->
                                <!-- </tbody> -->
                            <!-- </table> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<!-- Modal Chi Tiết Học Viên-->
<div class="modal fade" id="detail" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-add" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title text-center" style="font-family:'Times New Roman', Times, serif; font-weight: 900">
                    Thông Tin Chi Tiết Học Viên {{_details._id}}</h4>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding-top: 5px">
                <div class="row">
                    <div class="card m-3">
                        <div class="card-body card-add">
                            <form name="loginform">
                                <div class="row">
                                    <div class="col-lg-3 p-0">
                                        <div class="form-group">
                                            <div class="input-group" style="margin-bottom: 37px">
                                                <div class="input-group-prepend add">
                                                    <!-- <label for="dfname">Họ tên</label> -->
                                                </div>
												<input type="text" class="form-control name" ng-model="_details.Fullname" id="dname">
                                                <input type="text" class="form-control fname" ng-model="_details.Fistname" id="dfname">
												<input type="text" class="form-control lname" ng-model="_details.Lastname" id="dlname">
												<!-- <div class="input-group-prepend add"> -->
                                                    <!-- <label for="dname">Tên</label> -->
                                                <!-- </div> -->
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="email">Email</label>
                                                <input type="text" class="form-control" ng-model="_details.Email" id="demail">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="phone">Số DT</label>
                                                <input type="text" class="form-control" ng-keyup="checkDuplicator(_details, 2)" ng-model="_details.Phone" id="dphone">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <a href="" ng-click="openPhoneTab(_details.Phone)">
                                                            <i class="material-icons sas-color" style="margin-top: -20px;border: 1px solid; border-radius: 5px;">call</i>
                                                        </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="sex">Giới tính</label>
                                                <select class="form-control" ng-model="selectedSex" ng-options="option.name for option in Sex">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="address">Địa chỉ</label>
                                                <select class="form-control" ng-model="selectedAddress" ng-options="option.name for option in Address">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="dayreg2">Ngày Báo Danh</label>
                                                <input type="date" class="form-control" id="dayreg2" disabled>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3">
                                        <div class="form-group">
                                            <label for="note">Ghi chú</label>
                                            <textarea ng-keyup="check_length_note()" class="form-control" rows="5" ng-model="_details.Note" id="dnote"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="card m-3">
                        <div class="card-body">
                            <form name="loginform">
                                <div class="row">
                                    <div class="col-lg-5">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="coso">Cơ sở</label>
                                                <select class="form-control" ng-model="selectedCenter" ng-options="option.Name for option in Center">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="trangthai">Trạng thái</label>
                                                <select class="form-control" ng-model="selectedStatus" ng-options="option.name for option in Status">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ng-class="{'col-lg-4' : auth.Role[0].id === 0 , 'col-lg-5' : auth.Role[0].id === 1 }" -->
                                    <div class="col-lg-5">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="ngayhen">Ngày hẹn</label>
                                                <input type="date" class="form-control" id="dngayhen">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="giohen">Giờ hẹn</label>
                                                <select class="form-control" ng-model="selectedTime" ng-options="option.name for option in Appointment_time">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2">
                                        <div class="form-group">
                                            <button class="btn btn-warning btn-block btn-lg btn-update" ng-show="auth.Role[0].id !== 0"
                                                ng-disabled="_details.Status_student[0].id === 3 || auth.Username !== _details.Manager[0].id || auth.Access[0].capnhat === false"
                                                ng-click="up_detail()">Cập Nhật
                                            </button>
                                            <button class="btn btn-warning btn-block btn-lg btn-update" ng-show="auth.Role[0].id === 0"
                                                ng-disabled="_details.Status_student[0].id === 3" ng-click="up_detail()">Cập
                                                Nhật
                                            </button>
											
											<button class="btn sas-bk btn-block" ng-show="auth.Role[0].id !== 0" ng-disabled="auth.Access[0].sms === false || auth.Username !== _details.Manager[0].id" ng-click="showsms(_details)">SMS</button>
                                            <button class="btn sas-bk btn-block" ng-show="auth.Role[0].id === 0" ng-click="showsms(_details)">SMS</button>
											
											<button class="btn btn-info btn-block" ng-show="auth.Role[0].id !== 0" ng-disabled="auth.Access[0].lichsuchinhsua === false" ng-click="open_history()">Lịch sử chỉnh sửa (<span ng-show="_details.EditHistory !== null">{{_details.EditHistory.length}}</span><span ng-show="_details.EditHistory === null">0</span>)</button>
											<button class="btn btn-info btn-block" ng-show="auth.Role[0].id === 0" ng-click="open_history()">Lịch sử chỉnh sửa (<span ng-show="_details.EditHistory !== null">{{_details.EditHistory.length}}</span><span ng-show="_details.EditHistory === null">0</span>)</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <h6 class="text-muted text-center">gọi lại ngày: <b>{{_details.Time_recall[0].day}}</b> lúc: <b>{{_details.Time_recall[0].time[0].name}}</b></h6>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-top: none; padding-top: 0">
                <div class="col-4">
                    <button type="button" class="btn btn-block btn-lg btn-primary" ng-show="auth.Role[0].id !== 0"
                        ng-disabled="auth.Username !== _details.Manager[0].id || auth.Access[0].themban === false" ng-click="addfriend(_details._id)">Thêm
                        bạn
                    </button>
                    <button type="button" class="btn btn-block btn-lg btn-primary" ng-show="auth.Role[0].id === 0"
                        ng-click="addfriend(_details._id)">Thêm
                        bạn
                    </button>
                </div>
                <div class="col-4">
                    <button type="button" class="btn btn-block btn-lg btn-success" ng-show="auth.Role[0].id !== 0" ng-disabled="auth.Username !== _details.Manager[0].id  || _details.Status_student[0].id === 3 || auth.Access[0].goilaithoigian === false"
                        data-toggle="modal" data-target="#time">Gọi lại thời gian</button>

                    <button type="button" class="btn btn-block btn-lg btn-success" ng-show="auth.Role[0].id === 0"
                        data-toggle="modal" data-target="#time">Gọi lại thời gian</button>
                </div>
                <div class="col-4">
                    <button type="button" class="btn btn-block btn-lg btn-warning" ng-show="auth.Role[0].id !== 0" ng-disabled="auth.Username !== _details.Manager[0].id  || auth.Access[0].goilaisau === false || _details.Status_student[0].id !== 0 || (_details.Center !== null && _details.Center[0].Id !== null) || selectedCenter.Id !== null || (selectedStatus.value !== null && selectedStatus.value !== 0)"
                        ng-click="recall()">Gọi lại sau</button>
                        <button type="button" class="btn btn-block btn-lg btn-warning" ng-show="auth.Role[0].id === 0"
                        ng-click="recall()" ng-disabled="_details.Status_student[0].id !== 0 || (_details.Center !== null && _details.Center[0].Id !== null) || selectedCenter.Id !== null || (selectedStatus.value !== null && selectedStatus.value !== 0)">Gọi lại sau</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal lịch sử chỉnh sửa-->
<div class="modal fade" id="history" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">Lịch Sử Chỉnh Sửa</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form name="passform">
                    <div class="row">
                        <div class="col-12">
                           <table cellpadding="0"
                                class="table table-striped cell-border table-hover text-center">
                                <thead>
                                    <tr>
                                        <th>STT</th>
                                        <th>SĐT Cũ</th>
                                        <th>SĐT Mới</th>
                                        <th>Thời Gian</th>
                                        <th>Username</th>
                                        <th>Tên Nhân Viên</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="content in _details.EditHistory">
                                        <td class="text-center">{{$index +1}}</td>
                                        <td>{{content.Lastphone}}</td>
                                        <td>{{content.Newphone}}</td>
                                        <td>{{content.Daychange}}</td>
                                        <td>{{content.Username}}</td>
                                        <td>{{content.Fullname}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Modal Time-->
<div class="modal fade top-150" id="time" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">Thời Gian Gọi Lại</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form name="passform">
                    <div class="row">
                        <div class="col-6">
                            <div class="input-group add">
                                <label for="ngayhen">Ngày</label>
                                <input type="date" class="form-control" id="dngaygoilai">
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="input-group add">
                                <label for="giohen">Giờ</label>
                                <select class="form-control" ng-model="selectedTime2" ng-options="option.name for option in Appointment_time">
                                </select>
                            </div>
                        </div>
                    </div>
                </form>
                <button type="button" class="btn sas-bk btn-block" ng-click="up_detail_2()">Xác Nhận</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Thêm Học Viên header-->
<div class="modal fade" id="add" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-add" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title text-center" style="font-family:'Times New Roman', Times, serif; font-weight: 900">Thêm
                    Học Viên</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding-top: 5px">
                <div class="row">
                    <div class="card m-10">
                        <div class="card-body card-add">
                            <form name="loginform">
                                <div class="row">
                                    <div class="col-lg-4 p-0">
                                        <div class="form-group">
                                            <div class="input-group" style="margin-bottom: 37px;">
												<div class="input-group-prepend add">
                                                    <!-- <label for="fname">Họ tên</label> -->
                                                </div>
												<input type="text" class="form-control name" placeholder="Full Name" ng-model="data.fullname" id="name">
                                                <input type="text" class="form-control fname" placeholder="First Name" ng-model="data.fistname" id="fname">
												<input type="text" class="form-control lname" placeholder="Last Name" ng-model="data.lastname" id="lname">
													
                                                <!-- <div class="input-group-prepend add"> -->
                                                    <!-- <label for="name">Tên</label> -->
                                                <!-- </div> -->
                                                
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="email">Email</label>
                                                <input type="text" class="form-control" ng-model="data.email" id="email"
                                                    required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="phone">Số DT</label>
                                                <input type="number" class="form-control" ng-keyup="checkphone(data.phone)" ng-model="data.phone" id="phone"
                                                    required>
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <a href="" ng-click="openPhoneTab()">
                                                            <i class="material-icons sas-color" style="margin-top: -20px;border: 1px solid; border-radius: 5px;">call</i>
                                                        </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="sex">Giới tính</label>
                                                <select class="form-control" ng-model="maddselectedSex" ng-options="option.name for option in Sex">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="address">Địa chỉ</label>
                                                <select class="form-control" ng-model="maddselectedAddress" ng-options="option.name for option in Address">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="dayreg">Ngày đăng ký</label>
                                                <input type="date" class="form-control datetimepicker" id="madddayreg"
                                                    required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-1 p-0">
                                        <div class="form-group">
                                            <button class="btn sas-bk btn-block btn-lg btn-add-new" style="padding-left: 17px;"
                                                ng-click="AddStudent(data)">Thêm
                                                mới
                                            </button>
                                            <!-- <button class="btn btn-info btn-block">SMS</button>
                                            <button class="btn btn-info btn-block">Email</button> -->
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="card m-10">
                        <div class="card-body">
                            <form name="loginform">
                                <div class="row">
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="coso">Cơ sở</label>
                                                <select class="form-control" ng-model="maddselectedCenter" ng-options="option.Name for option in Center">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="trangthai">Trạng thái</label>
                                                <select class="form-control" ng-model="maddselectedStatus" ng-options="option.name for option in Status2">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="ngayhen">Ngày hẹn</label>
                                                <input type="date" class="form-control" id="maddngayhen">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="giohen">Giờ hẹn</label>
                                                <select class="form-control" ng-model="maddselectedTime" ng-options="option.name for option in Appointment_time">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <label for="note">Ghi chú</label>
                                            <textarea class="form-control" rows="5" ng-model="maddNote" id="note"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modal Thêm Học Viên 2 -->
<div class="modal fade" id="add2" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-add m-3-top" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title text-center" style="font-family:'Times New Roman', Times, serif; font-weight: 900">Thêm
                    Học Viên</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding-top: 5px">
                <div class="row">
                    <div class="card m-10">
                        <div class="card-body card-add">
                            <form name="loginform">
                                <div class="row">
                                    <div class="col-lg-4 p-0">
                                        <div class="form-group">
                                            <div class="input-group" style="margin-bottom: 37px">
                                                <div class="input-group-prepend add">
                                                    <!-- <label for="fullname">Họ tên</label> -->
                                                </div>
                                                <input type="text" class="form-control name" placeholder="Full Name" ng-model="data.fullname" id="name2"
                                                    required>
												<input type="text" class="form-control fname" placeholder="First Name" ng-model="data.fistname" id="fname2">
												<input type="text" class="form-control lname" placeholder="Last Name" ng-model="data.lastname" id="lname2">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="email">Email</label>
                                                <input type="text" class="form-control" ng-model="data.email" id="email2">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="phone">Số DT</label>
                                                <input type="number" class="form-control" ng-keyup="checkphone(data.phone)" ng-model="data.phone" id="phone2"
                                                    required>
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <a href="" ng-click="openPhoneTab()">
                                                            <i class="material-icons" style="color:#00BCD4; margin-top: -20px;border: 1px solid; border-radius: 5px;">call</i>
                                                        </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="sex">Giới tính</label>
                                                <select class="form-control" ng-model="addselectedSex" ng-options="option.name for option in Sex">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="address">Địa chỉ</label>
                                                <select class="form-control" ng-model="addselectedAddress" ng-options="option.name for option in Address">
                                                </select>
                                            </div>
                                        </div>
                                        <!-- <div class="form-group"> -->
                                            <!-- <div class="input-group add"> -->
                                                <!-- <label for="dayreg">Ngày đăng ký</label> -->
                                                <!-- <input type="date" class="form-control datetimepicker" id="adddayreg" -->
                                                    <!-- required> -->
                                            <!-- </div> -->
                                        <!-- </div> -->
                                    </div>
                                    <div class="col-lg-1 p-0">
                                        <div class="form-group">
                                            <button class="btn sas-bk btn-block btn-lg btn-add-new" style="padding-left: 17px;"
                                                ng-click="addnewfromaddFriend(data)">Thêm
                                                mới
                                            </button>
                                            <!-- <button class="btn btn-info btn-block">SMS</button>
                                            <button class="btn btn-info btn-block">Email</button> -->
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="card m-10">
                        <div class="card-body">
                            <form name="loginform">
                                <div class="row">
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="coso">Cơ sở</label>
                                                <select class="form-control" ng-model="addselectedCenter" ng-options="option.Name for option in Center">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="trangthai">Trạng thái</label>
                                                <select class="form-control" ng-model="addselectedStatus" ng-options="option.name for option in Status">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="ngayhen">Ngày hẹn</label>
                                                <input type="date" class="form-control" id="addngayhen">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group add">
                                                <label for="giohen">Giờ hẹn</label>
                                                <select class="form-control" ng-model="addselectedTime" ng-options="option.name for option in Appointment_time">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <label for="note">Ghi chú</label>
                                            <textarea class="form-control" rows="5" ng-model="addNote" id="note2"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div> -->
        </div>
    </div>
</div>

<!-- Modal Thêm User -->
<div class="modal fade" id="user" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title text-center" style="font-family:'Times New Roman', Times, serif; font-weight: 900">Thêm
                    User
                </h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding-top: 5px">
                <div class="row">
                    <div class="card m-10">
                        <div class="card-body card-add">
                            <form name="loginform">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <div class="input-group">
                                                <div class="input-group-prepend add">
                                                    <label for="uname">Username</label>
                                                </div>
                                                <input type="text" class="form-control" ng-model="data.uname" id="uname"
                                                    required>
                                            </div>

                                            <div class="input-group">
                                                <div class="input-group-prepend add">
                                                    <label for="ufullname">Họ tên</label>
                                                </div>
                                                <input type="text" class="form-control" ng-model="data.ufullname" id="ufullname"
                                                    required>
                                            </div>

                                            <div class="input-group add">
                                                <label for="uemail">Email</label>
                                                <input type="text" class="form-control" ng-model="data.uemail" id="uemail"
                                                    required>
                                            </div>

                                            <div class="input-group add">
                                                <label for="uphone">Số DT</label>
                                                <input type="number" class="form-control" ng-model="data.uphone" id="uphone"
                                                    required>
                                            </div>

                                            <div class="input-group add">
                                                <label for="urole">Phân quyền</label>
                                                <select id="urole" class="form-control" ng-model="data.urole">
                                                    <option selected>Choose...</option>
                                                    <option value="1">Telesale</option>
                                                    <option value="2">Marketing</option>
                                                </select>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <button type="button" class="btn btn-lg btn-primary btn-block" ng-click="signup(data)">
                                    <i class="material-icons">send</i> Tạo User</button>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Cập nhật User-->
<div class="modal fade top-150" id="update" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">Nhập Mật Khẩu</h4>
                <button type="button" class="close" ng-click="_close()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form name="passform">
                    <div class="form-group">
                        <input type="password" class="form-control" ng-model="oldpass" id="oldpassword" placeholder="Mật khẩu cũ"
                            required>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-control" ng-model="newpass" id="newpassword" placeholder="Mật khẩu mới"
                            required>
                    </div>
                </form>
                <button type="button" class="btn sas-bk btn-block" ng-click="update()">Xác Nhận</button>
            </div>
            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                
            </div> -->
        </div>
    </div>
</div>



<!-- Modal SMS -->
<div class="modal fade" id="sms" tabindex="-1" role="dialog" data-backdrop="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="display: block">
                <h4 class="modal-title text-center" id="exampleModalLabel">SMS</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="height: 10px; margin-top: -41px;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form name="passform">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="input-group add">
                                <input type="text" class="form-control" ng-model="_phone">
                            </div>
                        </div>
                        <div class="col-lg-12 pre-scrollable sms-scroll" style="margin-top:10px; margin-bottom: 10px; height: 300px">
                            <p class="sms-send" ng-repeat="dt in content.SMS">
                                <span style="display: block; border-bottom: 1px solid rgba(240, 240, 240, .9);">{{dt.SMS}}</span>
                                <span class="sms-status text-left">{{dt.Time}}</span>
                                <span class="sms-status text-right" style="float:right">{{dt._Status}}</span>
                            </p>

                            <h4 class="text-center" style="color: rgba(240, 240, 240, .9);" ng-if="content.SMS === null">Chưa
                                có tin nhắn nào
                                được gửi cho học viên này</h4>

                        </div>
                        <div class="col-lg-12">
                            <div class="input-group add">
                                <textarea class="form-control sms-nd" rows="5" ng-model="nd_sms_mau"></textarea>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col-lg-3">
                        <button type="button" class="btn btn-primary btn-block" style="padding-left: 18px" ng-click="GetMau()">SMS
                            Mẫu</button>
                    </div>
                    <div class="col-lg-6">
                        <button type="button" class="btn sas-bk btn-block" ng-click="send(data)">Gửi Tin</button>
                    </div>
                    <div class="col-lg-3">
                        <button type="button" class="btn btn-warning btn-block" ng-click="clear_sms()">Xóa</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modal SMS Mẫu -->
<div class="modal fade" id="smsmau" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Tin Nhắn Mẫu</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table cellpadding="0" class="table cell-border table-hover" style="font-size: 14px">
                    <thead>
                        <tr class="text-center">
                            <th>Chủ Đề</th>
                            <th>Nội Dung</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="content in Mau" style="cursor:pointer" ng-click="chonmau(content)">
                            <td style="width: 200px">{{content.Title}}</td>
                            <td>{{content.SMS}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Modal Thời gian trùng-->
<div class="modal fade top-150" id="timeduplicate" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">Thời Gian Kiểm Tra Trùng</h4>
                <button type="button" class="close" data-dismiss="modal" ng-click="close_Time()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form name="passform">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="input-group add">
                                <label for="ngayhen">Thời gian hiện tại</label>
                                <input type="text" class="form-control" value="{{auth.TimeForAdmin[0].name}}" disabled>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="input-group add">
                                <label for="giohen">Chọn Thời gian</label>
                                <select class="form-control" ng-model="choose_time_dup" ng-options="option.name for option in list_time_dup">
                                </select>
                            </div>
                        </div>
                    </div>
                </form>
                <button type="button" class="btn btn-info btn-block" ng-click="updateTimeDup()">Cập Nhật</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Chi Tiết Học Viên trùng-->
<div class="modal fade" id="duplicator" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-add" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title text-center" style="font-family:'Times New Roman', Times, serif; font-weight: 900">
                    Danh Sách Chi Tiết Các Học Viên Trùng</h4>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding-top: 5px">
				<table class="table">
					<thead>
						<tr>
							<th class="text-center">#</th>
							<th>Time</th>
							<th>ID</th>
							<th>Họ tên</th>
							<th>SĐT</th>
							<th>Ghi chú</th>
							<th>Telesale</th>
							<th>Trạng thái</th>
							<th>Chuyển</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="content in Duplicator">
							<td class="text-center">{{$index + 1}}</td>
							<td>{{content.Regtime}} {{content.Regday}}</td>
							<td ng-bind="content._id"></td>
							<td>{{content.Fullname}} {{content.Fistname}}</td>
							<td>{{content.Phone}}</td>
							<td>{{content.Note}}</td>
							<td>{{content.Manager[0].id}}</td>
							<td>{{content.Status_student[0].name}}</td>
							<td>
								<button type="button" rel="tooltip" class="btn btn-info sas-bk" ng-click="sendStudent(content)">
									<i class="material-icons">send</i>
								</button>
							</td>
						</tr>
						
					</tbody>
				</table>
            </div>
        </div>
    </div>
</div>

<!-- Modal Chi Tiết Học Viên trùng khi thêm-->
<div class="modal fade" id="addduplicator" tabindex="-1" role="dialog" data-backdrop="false" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-add" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title text-center" style="font-family:'Times New Roman', Times, serif; font-weight: 900">
                    Danh Sách Chi Tiết Các Học Viên Trùng</h4>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding-top: 5px">
				<table class="table">
					<thead>
						<tr>
							<th class="text-center">#</th>
							<th>Time</th>
							<th>ID</th>
							<th>Họ tên</th>
							<th>SĐT</th>
							<th>Ghi chú</th>
							<th>Telesale</th>
							<th>Trạng thái</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="content in Duplicator">
							<td class="text-center">{{$index + 1}}</td>
							<td>{{content.Regtime}} {{content.Regday}}</td>
							<td ng-bind="content._id"></td>
							<td>{{content.Fullname}} {{content.Fistname}}</td>
							<td>{{content.Phone}}</td>
							<td>{{content.Note}}</td>
							<td>{{content.Manager[0].id}}</td>
							<td>{{content.Status_student[0].name}}</td>
						</tr>						
					</tbody>
				</table>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        var d = new Date();
        var currMonth = d.getMonth();
        var currYear = d.getFullYear();
        var startDate = new Date(currYear, currMonth, 1);

        $("#hregday").datepicker({
            changeYear: true,
            changeMonth: true,
            dateFormat: "dd/mm/yy"
        }).datepicker("setDate", startDate);

        $("#hregday2").datepicker({
            changeYear: true,
            changeMonth: true,
            dateFormat: "dd/mm/yy"
        }).datepicker("setDate", new Date());
    });
</script>
